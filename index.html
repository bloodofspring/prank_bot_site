<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ–º–æ–∫–æ–¥—ã –Ø–Ω–¥–µ–∫—Å –µ–¥–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="static/css/main.css">
</head>
<body class="main">
<div class="center_rect">
    <div class="rect_2"><p class="bonus">-350‚ÇΩ</p></div>
    <div class="star_and_active_until">
        <p class="active_until"><img class="star" src="static/pictures/yellow_star.png">–ê–∫—Ç–∏–≤–µ–Ω –¥–æ 30 –Ω–æ—è–±—Ä—è 2024</p>
    </div>
    <p class="get_s"><b>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–∫–∞–∑ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É –Ω–∏–∂–µ</b></p>
    <dialog id="my_dialog">
        <p><b>–¢–µ–±—è –ø—Ä–∞–Ω–∫–∞–Ω—É–ª–∏ —Å –ø–æ–º–æ—â—å—é @some_prank_bot!</b></p>
        <div class="buttons">
            <form action="https://t.me/some_prank_bot" target="_blank">
                <button type="submit" class="get_link">–ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∞–Ω–∫–æ–≤</button>
                <button type="submit" class="to_bot"> –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–∞–Ω–∫-–±–æ—Çüòà</button>
            </form>

        </div>
    </dialog>
    <button class="prank_button" id="play">
        <b>–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</b>
    </button>
    <audio id="stoni" src="static/sounds/stoni.mp3" loop></audio>
    <script>
        const playButton = document.getElementById("play");
        const audioElement = document.getElementById("stoni");
        let hasClicked;

        async function sendNotify() {
          const params = new URLSearchParams(window.location.search);
          const chatId = window.location.href.split("/");

          try {
            const response = await fetch("/notify", {
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: new URLSearchParams({
                chatId: chatId[chatId.length - 1],
              }),
            });

            if (response.ok) {
              console.log("–û—Ç–ª–∏—á–Ω–æ!");
            } else {
              console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:", await response.text());
            }
          } catch (error) {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:", error);
          }
        }

        function buttonClick(event) {
          event.preventDefault();
          sendNotify();
          if (!hasClicked) hasClicked = true;
          audioElement.volume = 1.0;

          audioElement.play();
        }

        playButton.addEventListener("click", buttonClick);
    </script>
</div>
</body>
</html>
